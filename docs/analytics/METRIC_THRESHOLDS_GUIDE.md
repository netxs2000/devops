# DevOps 效能指标预警阈值配置白皮书 (Metric Thresholds & Governance)

**版本**: 3.8.0
**日期**: 2026-01-01

本文档为 **DevInsight** 平台的核心指标提供分阶段的预警阈值建议。针对不同成熟度的研发团队，管理层应动态调整预警红线，以平衡“管理合规”与“研发效率”。

---

## 1. 成熟度阶段定义 (Maturity Stages)

| 阶段 | 特征描述 | 管理重心 |
| :--- | :--- | :--- |
| **阶段 I: 规范建立期** | 流程刚上线，基础设施补齐阶段。 | **合规性与数据完整性**。重点治理绕过流程、不填工时等问题。 |
| **阶段 II: 提效加速期** | 流程已跑通，重点追求交付速度。 | **速度与响应性**。重点治理交付瓶颈、代码堆积和评审延迟。 |
| **阶段 III: 价值共创期** | 追求高质量、高复用与卓越体验。 | **技术复利与协作质量**。重点治理技术孤岛、协作熵和隐性满意度。 |

---

## 2. 核心分析指标配置表 (Metric Config Table)

### 2.1 隐性满意度 (Shadow Satisfaction Index - SSI)

* **管理意义**: 衡量交付过程中的摩擦力，预判业务方流失风险。
* **计算公式**: $100 - Penalty_{SLA} - Penalty_{Controversy} - Penalty_{Rework}$

| 指标状态 | 阶段 I (规范) | 阶段 II (提效) | 阶段 III (共创) | 触发行动 (Red Alert Action) |
| :--- | :--- | :--- | :--- | :--- |
| **🟢 卓越 (Green)** | > 70 | > 80 | > 90 | 记录为年度优秀服务标杆。 |
| **🟡 关注 (Yellow)** | 50 - 70 | 65 - 80 | 75 - 90 | 项目经理进行业务方非正式访谈。 |
| **🔴 风险 (Red)** | < 50 | < 65 | < 75 | **PMO 介入**，启动专项交付复盘会。 |

### 2.2 内源共创指数 (InnerSource Impact - ISI)

* **管理意义**: 衡量组织技术资产的复利利用水平，打破部门墙。
* **计算公式**: $40\% \text{ 跨界 MR } + 60\% \text{ 组件复用率}$

| 指标状态 | 阶段 I (规范) | 阶段 II (提效) | 阶段 III (共创) | 触发行动 (Red Alert Action) |
| :--- | :--- | :--- | :--- | :--- |
| **🟢 卓越 (Green)** | > 5 | > 15 | > 30 | 部门获得“技术共创卓越奖”。 |
| **🟡 关注 (Yellow)** | 2 - 5 | 8 - 15 | 15 - 30 | 架构部评估是否存在“重复造轮子”。 |
| **🔴 风险 (Red)** | < 2 | < 8 | < 15 | 识别为“技术孤岛”，需强制开放通用模块。 |

### 2.3 评审民主度 (Review Democracy)

* **管理意义**: 衡量技术决策的健康度，防止单点依赖和技术垄断。
* **计算**: `avg_independent_reviewers_per_mr`

| 指标状态 | 阶段 I (规范) | 阶段 II (提效) | 阶段 III (共创) | 触发行动 (Red Alert Action) |
| :--- | :--- | :--- | :--- | :--- |
| **🟢 卓越 (Green)** | > 1.0 | > 1.2 | > 1.5 | 团队备份能力极强，无单点风险。 |
| **🟡 关注 (Yellow)** | 0.8 - 1.0 | 1.0 - 1.2 | 1.1 - 1.5 | 增加 Code Review 环节的强制评审人。 |
| **🔴 风险 (Red)** | < 0.8 | < 1.0 | < 1.1 | **独裁警告**。识别为技术垄断，需分流合并权。 |

### 2.4 协作熵 (Collaboration Entropy)

* **管理意义**: 指标过高代表沟通内耗严重，过低代表评审失效。
* **计算**: `avg_human_comments_per_mr`

| 指标状态 | 阶段 I (规范) | 阶段 II (提效) | 阶段 III (共创) | 触发行动 (Red Alert Action) |
| :--- | :--- | :--- | :--- | :--- |
| **🟢 理想 (Green)** | 3 - 10 | 5 - 12 | 8 - 15 | 团队沟通充分，质量把关严密。 |
| **🟡 异常 (Yellow)** | > 12 或 < 2 | > 15 或 < 3 | > 20 或 < 5 | 评估需求描述是否清晰或评审是否走过场。 |
| **🔴 严重 (Red)** | > 20 | > 25 | > 30 | **沟通风暴**。会议介入，强制执行线下方案评审。 |

### 2.5 架构脆性指数 (Architectural Brittleness Index - ABI)

* **管理意义**: 识别高风险核心资产，预防系统性技术塌陷。
* **计算**: 综合入度权重、复杂度、覆盖率与代码动荡频率。

| 指标状态 | 阶段 I (规范) | 阶段 II (提效) | 阶段 III (共创) | 触发行动 (Red Alert Action) |
| :--- | :--- | :--- | :--- | :--- |
| **🟢 稳健 (Green)** | < 60 | < 50 | < 40 | 架构基石，支持大规模复用。 |
| **🟡 关注 (Yellow)** | 60 - 100 | 50 - 80 | 40 - 70 | 开启专项重构计划，提升覆盖率。 |
| **🔴 脆性 (Red)** | > 100 | > 80 | > 70 | **核心预警**。限制外部依赖项增加，强制质量回溯。 |

### 2.6 计划确定性指数 (Planning Certainty Index - PCI)

* **管理意义**: 衡量承诺履行能力，提升排期的可预测性。
* **计算**: $PCI = (Accuracy \times 0.7) + (\frac{1}{DelayCount+1} \times 0.3) \times 100$

| 指标状态 | 阶段 I (规范) | 阶段 II (提效) | 阶段 III (共创) | 触发行动 (Red Alert Action) |
| :--- | :--- | :--- | :--- | :--- |
| **🟢 稳定 (Green)** | > 60 | > 75 | > 85 | 交付专家团队，可承接战略高优任务。 |
| **🟡 波动 (Yellow)** | 40 - 60 | 55 - 75 | 70 - 85 | 引入敏捷估算扑克，加强估算培训。 |
| **🔴 风险 (Red)** | < 40 | < 55 | < 70 | **失信预警**。交付概率极低，需重新评估计划质量。 |

### 2.7 “胶水人”贡献度 (Glue-Person Index - GPI)

* **管理意义**: 识别团队隐性贡献，防止人才流失，激励知识协同。
* **计算**: `Wiki得分 * 5 + 流程得分 * 2 + 帮助得分 * 0.5`。

| 指标状态 | 阶段 I (规范) | 阶段 II (提效) | 阶段 III (共创) | 角色定性 (Persona) |
| :--- | :--- | :--- | :--- | :--- |
| **🟢 卓越 (Green)** | > 30 | > 50 | > 80 | **Team Catalyst (金牌催化剂)** |
| **🟡 良好 (Yellow)** | 10 - 30 | 20 - 50 | 40 - 80 | **Bridge Builder (协作桥梁)** |
| **⚪ 基础 (White)** | < 10 | < 20 | < 40 | **Silent Contributor (默默贡献者)** |

### 2.8 软件供应链流转效率 (Software Supply Chain Velocity - SSCV)

* **管理意义**: 衡量交付物理路径的顺畅程度，消除环境间的等待。
* **核心指标**: 环境平均停留时长 (Environment Dwell Time)。

| 指标状态 | 阶段 I (规范) | 阶段 II (提效) | 阶段 III (共创) | 触发行动 (Red Alert Action) |
| :--- | :--- | :--- | :--- | :--- |
| **🟢 顺畅 (Green)** | < 72h | < 24h | < 4h | 实现“制品即发布”，极致 CD 体验。 |
| **🟡 阻塞 (Yellow)** | 72h - 120h | 24h - 48h | 4h - 12h | 检查 Staging 环境冒烟测试耗时。 |
| **🔴 淤积 (Red)** | > 120h | > 48h | > 12h | **流转中断**。人工介入，查验环境锁定状态或手动流程瓶颈。 |

### 2.9 组织脆弱性指数 (Organization Vulnerability Index)

* **管理意义**: 识别过度依赖外部部门的协作陷阱，预判断延期雪球效应。
* **计算**: `LOG(被阻塞任务数 + 1) * 20`。

| 指标状态 | 阶段 I (规范) | 阶段 II (提效) | 阶段 III (共创) | 触发行动 (Red Alert Action) |
| :--- | :--- | :--- | :--- | :--- |
| **🟢 独立 (Green)** | < 30 | < 25 | < 20 | 部门自主性高，受外部波动影响小。 |
| **🟡 受限 (Yellow)** | 30 - 60 | 25 - 50 | 20 - 40 | 跨部门周会上需重点同步依赖方进度。 |
| **🔴 陷入 (Red)** | > 60 | > 50 | > 40 | **协作泥潭**。PMO 级调参，评估是否需要将依赖模块合并或组建虚拟联合小组。 |

---

## 3. 指标预警自动修正机制

系统支持在 `.env` 中通过环境变量动态覆盖上述默认值，实现分部门、分阶段的个性化管理。

```env
# 默认处于阶段 II (提效加速期)
METRICS__CURRENT_STAGE=2

# 允许覆盖特定部门的阈值
METRICS__THRESHOLDS__DEPT_AI_SSI_RED_LINE=70
METRICS__THRESHOLDS__DEPT_INFRA_ISI_GREEN_LINE=40
```

---

## 4. 落地建议 (Roadmap)

1. **第一季度 (规范化)**: 强制将“流程违规率”设为 P0 级告警。
2. **第二季度 (提效)**: 引入“隐性满意度 (SSI)”月度排名，建立部门红黑榜。
3. **第三季度 (价值共创)**: 将“内源共创指数”纳入部门长核心 KPI。

<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>工单查询 - Service Desk</title>
    <meta name="description" content="查询工单处理进度">
    <link href="css/main.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="auth_utils.js"></script>
    <script>
        if (!Auth.isLoggedIn()) {
            window.location.replace('service_desk_login.html');
        }
    </script>
</head>

<body>
    <header class="u-p-24 u-w-full sd-header">
        <div class="u-flex u-flex-between u-mx-auto u-max-w-1200">
            <div class="u-text-primary u-weight-700 u-text-h2">工单查询</div>
            <a href="service_desk.html" class="sd-nav-link">← 返回服务台</a>
        </div>
    </header>

    <main class="u-mx-auto u-p-40 u-max-w-1200">
        <div class="u-text-center u-mb-40">
            <h1 class="u-text-primary u-mb-10 u-text-display">工单查询</h1>
            <p class="u-text-dim u-text-h3">输入追踪码查询您的工单处理进度</p>
        </div>

        <div class="g-card u-p-32 u-mb-32">
            <form class="u-flex u-gap-15" id="searchForm">
                <input type="text" id="trackingCode" class="form-control u-flex-1"
                    placeholder="请输入追踪码（例如：BUG-20251227-001 或 REQ-20251227-001）" required>
                <button type="submit" class="btn-primary u-flex-shrink-0 u-p-24 u-lh-0" id="searchBtn">查询工单</button>
            </form>
        </div>

        <div id="errorAlert" class="alert error u-hide"></div>

        <div id="ticketCard" class="g-card u-p-40 u-hide">
            <div class="u-flex u-flex-between u-flex-start u-mb-32 u-pb-24 u-border-b-subtle">
                <div class="u-flex-1">
                    <h2 id="ticketTitle" class="u-mb-8 u-text-h1">-</h2>
                    <div class="u-text-dim u-text-body">
                        <span id="ticketType">-</span> |
                        追踪码: <strong id="displayTrackingCode" class="u-text-primary">-</strong>
                    </div>
                </div>
                <div id="ticketStatus" class="sd-badge">-</div>
            </div>

            <div class="g-grid-2 u-mb-32">
                <div class="sd-info-box">
                    <div class="u-text-dim u-mb-8 u-text-tiny u-uppercase">提交人</div>
                    <div class="u-weight-600 u-text-body" id="requesterName">-</div>
                </div>
                <div class="sd-info-box">
                    <div class="u-text-dim u-mb-8 u-text-tiny u-uppercase">联系邮箱</div>
                    <div class="u-weight-600 u-text-body" id="requesterEmail">-</div>
                </div>
                <div class="sd-info-box">
                    <div class="u-text-dim u-mb-8 u-text-tiny u-uppercase">创建时间</div>
                    <div class="u-weight-600 u-text-body" id="createdAt">-</div>
                </div>
                <div class="sd-info-box">
                    <div class="u-text-dim u-mb-8 u-text-tiny u-uppercase">最后更新</div>
                    <div class="u-weight-600 u-text-body" id="updatedAt">-</div>
                </div>
            </div>

            <a id="gitlabLink" href="#" target="_blank" class="btn-ghost btn-icon-text u-mt-16 u-hide">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path
                        d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z">
                    </path>
                </svg>
                在 GitLab 中查看详情
            </a>
        </div>

        <div id="emptyState" class="u-text-center u-p-40 u-text-dim">
            <div class="u-mb-24 u-text-64">🔍</div>
            <p class="u-text-h3">请输入追踪码查询工单信息</p>
        </div>
    </main>

    <footer class="u-p-24 u-text-center u-text-dim sd-footer u-mt-48">
        <p>© 2025 TJHQ</p>
    </footer>

    <!-- Scripts -->
    <script src="auth_utils.js"></script>
    <script src="js/modules/sd_portal.js" type="module"></script>
</body>

</html>

</html>